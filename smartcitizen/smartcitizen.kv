#:kivy 1.11.1

<SmartCitizen>:
    orientation: 'vertical'
    ActionBar:
        pos_hint: {"top": 1}
        icon: self.icon

        ActionView:
            use_separator: False
            ActionPrevious:
                markup: True
                title: '[b]Smart Citizen[/b]'
                with_previous: False
                app_icon: './images/icon_labo.png'
                color: (1, 0, 0.5, 1)
                font_size: '[size]40sp[/size]'
            ActionOverflow:
            # #ActionButton:
                # #icon: './images/icon_labo.png'
            ActionButton:
                # #important: True  # place après Btn2 !
                text: 'Capteurs'
                on_release: app.root.ids.sm.current = "first"
            ActionGroup:
                text: 'Menu'
                ActionButton:
                    text: 'Options'
                    on_release: app.open_settings()
                ActionButton:
                    text: 'Historique'
                    on_release: app.root.ids.sm.current = "second"
                ActionButton:
                    text: "Accueil"
                    on_release: app.root.ids.sm.current = "main"
                ActionButton:
                    text: 'Quitter'
                    on_release: app.do_quit()

    ScreenManager:
        id: sm
        MainScreen:
        Screen1:
        Screen2:

<MainScreen>:
    name: 'main'
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: './images/labo_bgd.png'

    BoxLayout:
        orientation: "vertical"
        Label:
            size_hint_y: 0.25
            text: 'Smart Citizen'
            font_size: "40sp"
        BoxLayout:
            size_hint_y: 0.55
        BoxLayout:
            size_hint_y: 0.1
            GridLayout:
                cols: 3
                BoxLayout:
                Button:
                    text: 'Capteurs'
                    on_release: app.root.ids.sm.current = "first"
                BoxLayout:
        BoxLayout:
            size_hint_y: 0.10

<Screen1>:
    name: 'first'
    blanche: blanche
    BoxLayout:
        orientation: 'vertical'
        Label:
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            size_hint_y: 0.10
            markup: True
            text: '[b]' + root.owner_titre + '[/b]'
            color: 1, 0, 0.5, 1
        BoxLayout:
            size_hint_y: 0.90
            orientation: 'vertical'
            ScrollView:
                size: self.size
                do_scroll_x: False
                do_scroll_y: True

                GridLayout:
                    id: blanche
                    size_hint_y: None
                    cols: 1
                    height: self.minimum_height
                    row_default_height: '160dp'
                    row_force_default: True
                    spacing: 10, 10
                    padding: 10, 40

                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[0]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[0] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[1]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[1] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[2]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[2] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[3]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[3] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[4]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[4] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[5]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[5] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[6]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[6] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[7]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[7] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[8]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[8] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[9]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[9] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[10]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[10] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[11]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[11] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[12]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[12] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[13]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[13] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[14]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[14] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[15]
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[15] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'

<MyGraph>:
    BoxLayout:
        size_hint_y: 1.0
        Graph:
            background_color: 0, 1, 1, 1
            border_color: 1, 1, 0, 1
            xlabel: 'X'
            ylabel: 'Y'
            x_ticks_minor: 5
            x_ticks_major: 25
            y_ticks_major: 1
            y_grid_label: True
            x_grid_label: True
            padding: 5
            x_grid: True
            y_grid: True
            xmin:0
            xmax:100
            ymin:-1
            ymax:1

<Screen2>:
    name: 'second'
    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 0.90

        MyGraph:
            id: graph

        BoxLayout: # 2 button en bas
            orientation: 'horizontal'
            size_hint_y: 0.10
            Button:
                text: "Retour à l'accueil"
                font_size: 30
                on_release: app.root.ids.sm.current = 'main'
            Button:
                text: 'Retour aux capteurs'
                font_size: 30
                on_release: app.root.ids.sm.current = 'first'
