#:kivy 1.11.1

<SmartCitizen>:
    orientation: 'vertical'
    ActionBar:
        pos_hint: {"top": 1}
        icon: self.icon
        ActionView:
            use_separator: False
            ActionPrevious:
                markup: True
                title: '[b]Smart Citizen[/b]'
                with_previous: False
                app_icon: './images/icon_labo.png'
                color: (1, 0, 0.5, 1)
                font_size: '[size]40sp[/size]'
            ActionOverflow:
            # #ActionButton:
                # #icon: './images/icon_labo.png'
            ActionButton:
                # #important: True  # place après Btn2 !
                text: 'Capteurs'
                on_release: app.root.ids.sm.current = "first"
            ActionGroup:
                text: 'Menu'
                ActionButton:
                    text: 'Options'
                    on_release: app.open_settings()
                ActionButton:
                    text: "Accueil"
                    on_release: app.root.ids.sm.current = "main"
                ActionButton:
                    text: 'Quitter'
                    on_release: app.do_quit()
    ScreenManager:
        id: sm
        MainScreen:
        Screen1:
        Screen2:

<MainScreen>:
    name: 'main'
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: './images/labo_bgd.png'

    BoxLayout:
        orientation: "vertical"
        Label:
            size_hint_y: 0.25
            text: 'Smart Citizen'
            font_size: "40sp"
        BoxLayout:
            size_hint_y: 0.55
        BoxLayout:
            size_hint_y: 0.1
            GridLayout:
                cols: 3
                BoxLayout:
                Button:
                    text: 'Capteurs'
                    on_release: app.root.ids.sm.current = "first"
                BoxLayout:
        BoxLayout:
            size_hint_y: 0.10

<OwnerInfo>:
    size_hint: .7, .4
    title: "Information"
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 20
        Label:
            size_hint_y: 0.85
            text_size: 300, None
            line_height: 1.5
            text: app.root.ids.sm.get_screen("first").owner_detail
        Button:
            text: 'OK'
            size_hint_y: 0.15
            on_press: root.dismiss()

<Screen1>:
    name: 'first'
    BoxLayout:
        orientation: 'vertical'
        Button:
            background_normal: ''
            background_color: 0.1, 0.1, 0, 1
            size_hint_y: 0.10
            markup: True
            text: '[b]' + root.owner_titre + '[/b]'
            color: 1, 0, 0.5, 1
            on_release: root.display_info()
        BoxLayout:
            size_hint_y: 0.90
            orientation: 'vertical'
            ScrollView:
                size: self.size
                do_scroll_x: False
                do_scroll_y: True

                GridLayout:
                    id: blanche
                    size_hint_y: None
                    cols: 1
                    height: self.minimum_height
                    row_default_height: '160dp'
                    row_force_default: True
                    spacing: 10, 10
                    padding: 10, 40

                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[0]
                            on_release: root.apply_go_to_screen2(0)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[0] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[1]
                            on_release: root.apply_go_to_screen2(1)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[1] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[2]
                            on_release: root.apply_go_to_screen2(2)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[2] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[3]
                            on_release: root.apply_go_to_screen2(3)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[3] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[4]
                            on_release: root.apply_go_to_screen2(4)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[4] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[5]
                            on_release: root.apply_go_to_screen2(5)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[5] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[6]
                            on_release: root.apply_go_to_screen2(6)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[6] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[7]
                            on_release: root.apply_go_to_screen2(7)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[7] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[8]
                            on_release: root.apply_go_to_screen2(8)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[8] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[9]
                            on_release: root.apply_go_to_screen2(9)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[9] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[10]
                            on_release: root.apply_go_to_screen2(10)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[10] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[11]
                            on_release: root.apply_go_to_screen2(11)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[11] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[12]
                            on_release: root.apply_go_to_screen2(12)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[12] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[13]
                            on_release: root.apply_go_to_screen2(13)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[13] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[14]
                            on_release: root.apply_go_to_screen2(14)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[14] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'
                    BoxLayout:
                        orientation: 'horizontal'
                        Button:
                            size_hint_x: 0.60
                            text: root.btns_text[15]
                            on_release: root.apply_go_to_screen2(15)
                        Label:
                            canvas.before:
                                Color:
                                    rgba: 0.8, 0.8, 0.8, 1
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            size_hint_x: 0.40
                            markup: True
                            text: '[b]' + root.labels_text[15] + '[/b]'
                            color: 1, 0, 0.5, 1
                            font_size: '20sp'
                            text_size: self.size
                            halign: 'center'
                            valign: 'middle'

<MyGraph>:  # Non utilisé, impossible d'ajouter la courbe
    Graph:
        size: root.size
        background_color: 0.8, 0.8, 0.8, 1
        border_color: 0, 0.1, 0.1, 1
        xlabel: 'Date/Heure'
        ylabel: 'Valeur du capteur'
        x_ticks_minor: 5
        x_ticks_major: 25
        y_ticks_major: 1
        y_grid_label: True
        x_grid_label: True
        padding: 5
        x_grid: True
        y_grid: True
        xmin: 0
        xmax: 100
        ymin: -1
        ymax: 1
        tick_color: (1, 0, 0, 1)
        label_options: {'color': (0.5, 0.5, 0, 1)}

<Screen2>:
    name: 'second'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 0.1
            Label:
                text: root.titre
        BoxLayout:
            size_hint_y: 0.90
            # graph_id: graph_id  # utile avec MyGraph
            id: graph_id
            # #MyGraph: Impossible d'ajouter la courbe
                # #id: graph_id
